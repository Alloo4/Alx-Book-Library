<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
    <style>
      .slide-container {
        width: 1280px;
        min-height: 720px;
        background: #ffffff;
        color: #202124;
        font-family: 'Roboto', sans-serif;
        padding: 40px;
      }
      .content {
        display: flex;
        flex-direction: column;
        height: 100%;
      }
      .header {
        margin-bottom: 30px;
      }
      .header h1 {
        font-size: 36px;
        color: #1a73e8;
        font-weight: bold;
      }
      .component-diagram {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      #component-tree {
        width: 100%;
        height: 500px;
      }
      .node circle {
        fill: #4285f4;
        stroke: #1a73e8;
        stroke-width: 2px;
      }
      .node text {
        font-size: 14px;
        font-family: 'Roboto', sans-serif;
      }
      .link {
        fill: none;
        stroke: #5f6368;
        stroke-width: 2px;
      }
      .component-description {
        font-size: 16px;
        color: #5f6368;
        margin-top: 20px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="slide-container">
      <div class="content">
        <div class="header">
          <h1>React Component Architecture</h1>
        </div>
        <div class="component-diagram">
          <div id="component-tree"></div>
        </div>
        <div class="component-description">
          The application is structured with App.js as the main component, handling routing and overall layout.
          SearchBar, BookList, and BookDetail components manage the core functionality, while utility components
          like LoadingSpinner and ErrorDisplay enhance the user experience.
        </div>
      </div>
    </div>

    <script>
      // Component hierarchy data
      const data = {
        name: "App.js",
        description: "Main component, routing & layout",
        children: [
          {
            name: "SearchBar.js",
            description: "Handles user search input"
          },
          {
            name: "BookList.js",
            description: "Displays search results",
            children: [
              {
                name: "BookCard.js",
                description: "Individual book summary"
              }
            ]
          },
          {
            name: "BookDetail.js",
            description: "Comprehensive book info"
          },
          {
            name: "LoadingSpinner.js",
            description: "Loading state indicator"
          },
          {
            name: "ErrorDisplay.js",
            description: "Error message handling"
          }
        ]
      };

      // Set up the D3.js tree diagram
      const width = 1000;
      const height = 500;
      const margin = {top: 20, right: 90, bottom: 30, left: 90};
      
      // Declares a tree layout and assigns the size
      const treemap = d3.tree()
        .size([height, width - 200]);
      
      // Assigns parent, children, height, depth
      const root = d3.hierarchy(data, d => d.children);
      root.x0 = height / 2;
      root.y0 = 0;
      
      // Create the SVG container
      const svg = d3.select("#component-tree")
        .append("svg")
        .attr("width", width)
        .attr("height", height)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);
      
      // Compute the new tree layout
      const treeData = treemap(root);
      
      // Declare links and nodes
      const nodes = treeData.descendants();
      const links = treeData.descendants().slice(1);
      
      // Normalize for fixed-depth
      nodes.forEach(d => { d.y = d.depth * 180 });
      
      // Add links between nodes
      svg.selectAll(".link")
        .data(links)
        .enter()
        .append("path")
        .attr("class", "link")
        .attr("d", d => {
          return "M" + d.y + "," + d.x
            + "C" + (d.y + d.parent.y) / 2 + "," + d.x
            + " " + (d.y + d.parent.y) / 2 + "," + d.parent.x
            + " " + d.parent.y + "," + d.parent.x;
        });
      
      // Add nodes
      const node = svg.selectAll(".node")
        .data(nodes)
        .enter()
        .append("g")
        .attr("class", "node")
        .attr("transform", d => "translate(" + d.y + "," + d.x + ")");
      
      // Add circles for the nodes
      node.append("circle")
        .attr("r", 10);
      
      // Add component names
      node.append("text")
        .attr("dy", ".35em")
        .attr("x", d => d.children ? -13 : 13)
        .attr("text-anchor", d => d.children ? "end" : "start")
        .text(d => d.data.name);
      
      // Add component descriptions
      node.append("text")
        .attr("dy", "1.75em")
        .attr("x", d => d.children ? -13 : 13)
        .attr("text-anchor", d => d.children ? "end" : "start")
        .attr("font-size", "12px")
        .attr("fill", "#5f6368")
        .text(d => d.data.description);
    </script>
  </body>
</html>

